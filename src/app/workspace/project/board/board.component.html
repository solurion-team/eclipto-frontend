<div class="background-for-board">
  <div class="board-content-wrapper">
    <div class="board-content" cdkDropListGroup>

      @for (taskStatus of taskStatuses$ | async; track taskStatus.id) {
        <div
          cdkDropList
          [cdkDropListData]="taskStatus.tasks"
          class="task-column"
          (cdkDropListDropped)="drop($event, taskStatus)"
          [cdkDropListSortPredicate]="sortPredicate">

          <span class="title-for-column">{{ taskStatus.name }}</span>
          <button mat-raised-button class="create-task-card" (click)="openAddTaskDialog(taskStatus.id)">
            <mat-icon>add</mat-icon>
            <span class="text-create">Создать</span>
          </button>

          <div class="task-column-content">
            @for (task of taskStatus.tasks; track task.id) {
              <div
                class="task-card"
                cdkDrag
                [cdkDragData]="task"
                (click)="editTask(task.id)">
                <div class="task-card-header">
                  <span class="task-title">{{ task.title }}</span>
                  <button mat-icon-button [matMenuTriggerFor]="menu" class="task-card-menu">
                    <mat-icon>more_horiz</mat-icon>
                  </button>
                </div>

                <span class="task-card-priority">
                <mat-icon class="task-card-priority" style="color:red" *ngIf="task.priority === 'high'">dehaze</mat-icon>
                <mat-icon class="task-card-priority" style="color:orange" *ngIf="task.priority === 'medium'">drag_handle</mat-icon>
                <mat-icon class="task-card-priority" style="color: limegreen" *ngIf="task.priority === 'low'">horizontal_rule</mat-icon>
                </span>
                <mat-menu #menu="matMenu">
                  <button mat-menu-item (click)="deleteTask(taskStatus.id, task.id)">
                    <mat-icon>delete</mat-icon>
                    <span>Удалить карточку</span>
                  </button>
                </mat-menu>
              </div>
            }
          </div>
        </div>
      }
      <button mat-mini-fab color="surface" class="add-task-column" (click)="openAddTaskStatusDialog()">
        <mat-icon>add</mat-icon>
      </button>
    </div>
  </div>
</div>
































<!--<div class="background-for-board">-->
<!--  @for (taskStatus of taskStatuses$ | async; track taskStatus.id) {-->
<!--    <div class="task-column">-->
<!--      <span class="title-for-column">{{taskStatus.name}}</span>-->
<!--      <button mat-raised-button class="create-task-card" (click)="openAddTaskDialog(taskStatus.id)">-->
<!--        <mat-icon>add</mat-icon>-->
<!--        <span class="text-create">Создать</span>-->
<!--      </button>-->
<!--      @for (task of taskStatus.tasks; track task.id) {-->
<!--        <mat-card class="task-card">-->
<!--          <div class="task-card-content">-->
<!--            <div class="task-card-header">-->
<!--              <span class="task-title">{{task.title}}</span>-->
<!--              <button mat-icon-button [matMenuTriggerFor]="menu" class="task-card-menu">-->
<!--                <mat-icon>more_horiz</mat-icon>-->
<!--              </button>-->
<!--            </div>-->
<!--            <div class="task-card-priority">{{task.priority}}</div>-->

<!--            <mat-menu #menu="matMenu">-->
<!--              <button mat-menu-item (click)="openEditTaskDialog(task.id)">-->
<!--                <mat-icon>edit</mat-icon>-->
<!--                <span>Редактировать</span>-->
<!--              </button>-->
<!--              <button mat-menu-item>-->
<!--                <mat-icon>delete</mat-icon>-->
<!--                <span>Удалить карточку</span>-->
<!--              </button>-->
<!--            </mat-menu>-->
<!--          </div>-->
<!--        </mat-card>-->
<!--      }-->
<!--    </div>-->
<!--  }-->
<!--  <button mat-mini-fab color="surface" class="add-task-column" (click)="openAddTaskStatusDialog()">-->
<!--    <mat-icon>add</mat-icon>-->
<!--  </button>-->
<!--</div>-->



